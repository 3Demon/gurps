<form class='gurps-app' autocomplete='off'>
  <div style='border: none;'>
    <h2><i class='fa fa-cogs' aria-hidden='true'></i> {{i18n "GURPS.equipmentEditor" "Equipment Editor"}}</h2>

    <div style='display: grid; grid-template-columns: auto 1fr; gap: 0.5em;'>
      <div style='grid-column: 1 / span 2;'>
        <input id='itemname' type='text' value='{{name}}' name=' name'
          placeholder='{{i18n "GURPS.equipmentName" "Equipment Name"}}' />
      </div>

      <div class='img-display' style='background-image: url({{image}}); border: solid 1px black;'>
        <img class='profile-img' src='{{ image }}' data-edit='image' title='{{#if name}}{{name}}{{else}}Image{{/if}}' />
      </div>

      <div class='gurps-group'>
        <h4>{{i18n "GURPS.equipmentAttributes" "Attributes"}}</h4>

        <div style='display: grid; grid-template-columns: 1fr 1fr; gap: 0.5em;'>
          <div class='label-value-row' style='grid-template-columns: auto 1fr;'>
            <label>{{i18n "GURPS.equipmentQuantity" "Quantity"}}: </label>
            <div class='icon-prefix'>
              <input id='quantity' class='digits-only' type='text' value='{{data.eqt.f_count}}'
                name='data.eqt.f_count' />
            </div>
            <label>{{i18n "GURPS.equipmentCost" "Cost"}}: </label>
            <div class='icon-prefix'>
              <input id='cost' type='number' class='digits-only' value='{{data.eqt.cost}}' />
              <span>$</span>
            </div>
            <label>{{i18n "GURPS.equipmentWeight" "Weight"}}: </label>
            <div class='icon-prefix'>
              <input id='weight' type='number' class='digits-only' value='{{data.eqt.weight}}' />
              <span><i class="fas fa-weight-hanging"></i></span>
            </div>
          </div>
          <div class='label-value-row' style='grid-template-columns: auto 1fr;'>
            <label>{{i18n "GURPS.equipmentUses" "Uses"}}: </label>
            <div class='icon-prefix'>
              <input id='uses' type="number" class="digits-only" value="{{data.eqt.uses}}" name="data.eqt.uses" />
            </div>
            <label>{{i18n "GURPS.equipmentMaxUses" "Max Uses"}}: </label>
            <div class='icon-prefix'>
              <input id='maxuses' type="number" class='digits-only' value="{{data.eqt.maxuses}}"
                name="data.eqt.maxuses" />
            </div>
            <label>{{i18n "GURPS.equipmentPageRef" "Page Ref"}}: </label>
            <div class='icon-prefix'>
              <input id="pageref" type="text" value="{{data.eqt.pageref}}" name="data.eqt.pageref" />
            </div>
          </div>
          <div style='grid-column: 1 / span 2;'>
            <strong>{{i18n "GURPS.notes" "Notes"}}</strong>
            <textarea id='notes' rows="4" name="data.eqt.notes" style='width: 100%;'>{{data.eqt.notes}}</textarea>
          </div>
        </div>
      </div>
    </div>

    <div class='inputs'>

      <div>Melee:</div>
      <div></div>
      {{#each data.melee as | this key |}}
        <div class="label">Melee Weapon</div>
        <div></div>
        <div class="label">Usage</div>
        <input class="gcs-input-sm8" type="text" value="{{mode}}" name="data.melee.{{key}}.mode" />
        <div class="label">On-the-Fly</div>
        <span>[<input class="gcs-input-sm25" type="text" value="{{otf}}" name="data.melee.{{key}}.otf" />]</span>
        <div class="label">Skill lvl</div>
        <input class="gcs-input-sm8" type="text" value="{{level}}" data-dtype="Number"
          name="data.melee.{{key}}.level" />
        <div class="label">Parry</div>
        <div><input class="parry gcs-input-sm8" type="text" value="{{parry}}" name="data.melee.{{key}}.parry" /></div>
        <div class="label">Block</div>
        <div><input class="block gcs-input-sm8" type="text" value="{{block}}" name="data.melee.{{key}}.block" /></div>
        <div class="label">Damage</div>
        <div><span><input class="damage gcs-input-sm8" type="text" value="{{damage}}"
              name="data.melee.{{key}}.damage" />
            Dmg types: burn, cor, cr, cut, fat, imp, pi-, pi, pi+, pi++, tox, dmg</span></div>
        <div class="label">Reach</div>
        <div><input class="reach gcs-input-sm8" type="text" value="{{reach}}" name="data.melee.{{key}}.reach" /></div>
        <div class="label">ST</div>
        <div><input class="st gcs-input-sm8" type="text" value="{{st}}" name="data.melee.{{key}}.st" /></div>
        <div class="label">Notes</div>
        <textarea class="notes gcs-input-ta" style="width: 460px; height:90px !important;" rows="5"
          name="data.melee.{{key}}.notes">{{notes}}</textarea>
      {{/each}}

      <div>Ranged:</div>
      <div></div>
      {{#each data.ranged as | this key |}}
        <div class="label">Usage</div>
        <input class="usage gcs-input-sm8" type="text" value="{{mode}}" name="data.ranged.{{key}}.mode" />
        <div class="label">On-the-Fly</div>
        <span>[<input class="gcs-input-sm25" type="text" value="{{otf}}" name="data.ranged.{{key}}.otf" />]</span>
        <div class="label">Skill lvl</div>
        <input class="level gcs-input-sm8" type="text" value="{{level}}" data-dtype="Number"
          name="data.ranged.{{key}}.level" />
        <div class="label">Acc</div>
        <div><input class="acc gcs-input-sm8" type="text" value="{{acc}}" data-dtype="Number"
            name="data.ranged.{{key}}.acc" /></div>
        <div class="label">Damage</div>
        <div><input class="damage gcs-input-sm8" type="text" value="{{damage}}" name="data.ranged.{{key}}.damage" />
          Dmg
          types: burn, cor, cr, cut, fat, imp, pi-, pi, pi+, pi++, tox, dmg</div>
        <div class="label">Range</div>
        <div><input class="range gcs-input-sm8" type="text" value="{{range}}" name="data.ranged.{{key}}.range" />
        </div>
        <div class="label">RoF</div>
        <div><input class="rof gcs-input-sm8" type="text" value="{{rof}}" name="data.ranged.{{key}}.rof" /></div>
        <div class="label">Shots</div>
        <div><input class="shots gcs-input-sm8" type="text" value="{{shots}}" name="data.ranged.{{key}}.shots" />
        </div>
        <div class="label">Bulk</div>
        <div><input class="bulk gcs-input-sm8" type="text" value="{{bulk}}" data-dtype="Number"
            name="data.ranged.{{key}}.bulk" /></div>
        <div class="label">Rcl</div>
        <div><input class="rcl gcs-input-sm8" type="text" value="{{rcl}}" name="data.ranged.{{key}}.rcl" /></div>
        <div class="label">ST</div>
        <div><input class="st gcs-input-sm8" type="text" value="{{st}}" name="data.ranged.{{key}}.st" /></div>
        <div class="label">Notes</div>
        <textarea class="notes gcs-input-ta" style="width: 460px; height:90px !important;" rows="5"
          name="data.ranged.{{key}}.notes">{{notes}}</textarea>
      {{/each}}

      <div>Skills:</div>
      <div></div>
      {{#each data.skills as | this key |}}
        <div class="label">Name of Skill</div>
        <input class="name gcs-input" type="text" value="{{this.name}}" name="data.skills.{{key}}.name">
        <div class="label">On-the-Fly</div>
        <span>[<input class="gcs-input-sm25" type="text" value="{{otf}}" name="data.skills.{{key}}.otf" />]</span>
        <div class="label">Level</div>
        <input class="level gcs-input-sm8" type="text" value="{{level}}" name="data.skills.{{key}}.level" />
        <div class="label">RSL</div>
        <div><input class="relativelevel gcs-input-sm5" type="text" value="{{relativelevel}}"
            name="data.skills.{{key}}.relativelevel" /></div>
        <div class="label">Pts</div>
        <input class="points gcs-input-sm3" type="text" value="{{points}}" data-dtype="Number"
          name="data.skills.{{key}}.points" />
        <div class="label">Notes</div>
        <textarea class="notes gcs-input-ta" style="width: 460px; height:90px !important;" rows="5"
          name="data.skills.{{key}}.notes">{{notes}}</textarea>
        <div class="label">Page Ref</div>
        <input class="pageref gcs-input-sm5" type="text" value="{{pageref}}" name="data.skills.{{key}}.pageref" />
      {{/each}}


    </div>
    <div style="display:flex">
      <div class="npc-input-create"><button id="item1" type="button">Add Melee Weapon</button></div>
      <div class="npc-input-create"><button id="item2" type="button">Add Ranged Weapon</button></div>
      <div class="npc-input-create"><button id="item3" type="button">Add Skill</button></div>
    </div>
</form>