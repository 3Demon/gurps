<div id='melee' class='gga-table with-notes'>
  <div class='itemmenu header' readonly></div>
  <div class='desc header'>
    <div class='headermenu'>
      <span>{{i18n 'GURPS.meleeWeapons'}}</span>
      <i class='fas fa-caret-square-down'></i>
    </div>
  </div>
  <div class='usage header'>{{i18n 'GURPS.usage'}}</div>
  <div class='level header'>{{i18n 'GURPS.level'}}</div>
  <div class='parry header'>{{i18n 'GURPS.parry'}}</div>
  <div class='block header'>{{i18n 'GURPS.block'}}</div>
  <div class='damage header'>{{i18n 'GURPS.damage'}}</div>
  <div class='reach header'>{{i18n 'GURPS.reach'}}</div>
  <div class='st header'>{{i18n 'GURPS.attributesST'}}</div>

  {{#each (flatlist data.melee) }}
    {{#unless ../isEditing}}
      {{#unless isCollapsed}}
        <div class='itemmenu' readonly></div>

        <div class='desc dblclkedit meleedraggable indent{{indent}}' data-key='data.melee.{{@key}}' data-path='data.melee'>
          <div class='gga-desc-text' style='display: flex; flex-flow: row nowrap; width: 100%;'>
            <div>
              {{#if hasContains}}<i class='fas fa-caret-down expandcollapseicon'></i>{{/if}}
              {{#if hasCollapsed}}<i class='fas fa-caret-right expandcollapseicon'></i>{{/if}}
            </div>
            <div class='tooltip-manager' style='width: 100%;'>
              {{{gurpslink this.name}}}
              {{#if (displayItemHover this)}}
                <div class='tooltippic'><img src='{{this.img}}' /></div>
              {{/if}}
            </div>
            <div>
              {{#if (isFoundryItem this)}}
                <i class='far fa-star tooltip' style='color: olivedrab; font-weight: 900;'>
                  <span class='tooltiptext'>{{i18n 'GURPS.equipmentFoundryItem' 'Foundry Item'}}</span>
                </i>
              {{/if}}
            </div>
          </div>
          <div class='list_note'>{{{gurpslink this.notes}}}</div>
        </div>

        <div class='usage flex-center'>{{this.mode}}</div>
        <div
          class='level rollable flex-center'
          data-name='{{this.name}} ({{this.mode}})'
          data-key='data.melee.{{@key}}'
          data-otf='A:"{{this.name}} ({{this.mode}})"'
        >{{this.level}}</div>
        <div class='parry rollable flex-center' data-otf='Parry'>{{this.parry}}</div>
        <div class='block rollable flex-center' data-otf='Block'>{{this.block}}</div>
        <div class='damage rollable flex-center' data-damage data-otf='{{this.damage}}'>{{this.damage}}</div>
        <div class='reach flex-center'>{{this.reach}}</div>
        <div class='st flex-center'>{{this.st}}</div>
      {{/unless}}
    {{else}}
      <div class='itemmenu meleemenu' data-key='data.melee.{{@key}}'>
        <i class='fas fa-times'></i>
      </div>
      <div class='desc indent{{indent}}' data-key='data.melee.{{key}}'>
        <input name='data.melee.{{key}}.name' class='gcs-input-25' type='text' value='{{this.name}}' />
        <div class='list_note'>
          <input name='data.melee.{{key}}.notes' class='gcs-input-25' type='text' value='{{this.notes}}' />
        </div>
      </div>
      <div class='usage' data-key='data.melee.{{key}}'>
        <input name='data.melee.{{key}}.mode' class='gcs-input' type='text' value='{{this.mode}}' /></div>
      <div class='level' data-key='data.melee.{{key}}'>
        <input name='data.melee.{{key}}.import' class='gcs-input-sm2' type='text' value='{{this.import}}' /></div>
      <div class='parry' data-key='data.melee.{{key}}'>
        <input name='data.melee.{{key}}.parry' class='gcs-input-sm4' type='text' value='{{this.parry}}' /></div>
      <div class='block' data-key='data.melee.{{key}}'>
        <input name='data.melee.{{key}}.block' class='gcs-input-sm4' type='text' value='{{this.block}}' /></div>
      <div class='damage' data-key='data.melee.{{key}}'>
        <input name='data.melee.{{key}}.damage' class='gcs-input' type='text' value='{{this.damage}}' /></div>
      <div class='reach' data-key='data.melee.{{key}}'>
        <input name='data.melee.{{key}}.reach' class='gcs-input-sm3' type='text' value='{{this.reach}}' /></div>
      <div class='st' data-key='data.melee.{{key}}'>
        <input name='data.melee.{{key}}.st' class='gcs-input-sm2' type='text' value='{{this.st}}' /></div>
    {{/unless}}
  {{/each}}
</div>