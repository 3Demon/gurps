<div class='tracked-resource {{#unless name}}inactive{{/unless}}' data-gurps-resource='{{name}}'>
    <div class='header'>{{#if label}}{{i18n label}}{{else}}{{i18n "GURPS.resource" "Resource"}} {{@index}}{{/if}}</div>
    <div class='spinner'>
      <button data-operation='resource-dec'><i class="fas fa-minus"></i></button>
      <details>
      <summary>
      <input class="gcs-attr-input" name="{{name}}" type="text" value="{{resource.value}}"
        placeholder="{{resource.max}}" data-dtype="Number" />
      </summary>
      <div class='popup button-ribbon'>
        <button data-operation='resource-update' data-value='-10'>-10</button>
        <button data-operation='resource-update' data-value='-5'>-5</button>
        <button data-operation='resource-update' data-value='-1'>-1</button>
        <button data-operation='resource-update' data-value='0'>0</button>
        <button class='restore' data-operation='resource-update' data-value=''></button>
        <button data-operation='resource-update' data-value='+1'>+1</button>
        <button data-operation='resource-update' data-value='+5'>+5</button>
        <button data-operation='resource-update' data-value='+10'>+10</button>
      </div>
      </details> 
      <button data-operation='resource-inc'><i class="fas fa-plus"></i></button>
      <button data-operation='resource-reset'><i class="fas fa-undo"></i></button>
    </div>

    <div class='condition-block tooltip-wrapper'> 
      {{#if thresholds}}
      {{#with (lookup thresholds (threshold-of thresholds max value))}}
      <div class='tooltip condition' style='background-color: {{concat this.color "80"}};'>{{this.condition}}
        <span class="tooltiptext">
          <div style="display: grid; grid-template-columns: min-content min-content auto;">
            {{#each (thresholdBreakpoints ../this)}}
            <div class="field condensed noedit">{{comparison}}</div>
            <div class="field condensed noedit">{{breakpoint}}</div>
            <div class="label {{style}}">{{label}}</div>
            {{/each}}
          </div>
        </span>
      </div>
      {{/with}}
      {{else}}
      <div class='condition {{#if (gt value max)}}above{{else}}{{#if (lt value min)}}below{{/if}}{{/if}}'>
        {{#if
        (gt value max)}}Over{{else}}{{#if (lt value min)}}Below{{else}}Normal{{/if}}{{/if}}</div>
      <div class='max'>({{min}}/{{max}})</div>
      {{/if}}
    </div>
  </div> <!-- end of resource -->
